{% extends 'base.html' %}
{% load static %}
{% block title %}Welcome to {{ SITE_NAME }}{% endblock %}

{% block content %}
<!-- Bootstrap-styled homepage -->
<section class="hero bg-dark text-white" style="background: linear-gradient(90deg, rgba(15,23,42,0.95), rgba(20,27,48,0.95));">
    <div class="container">
        <div class="row align-items-center gx-5">
            <div class="col-md-6">
                <h1 class="display-5 fw-bold reveal delay-1">Eliminate Parking Problems <span class="hero-accent">.</span></h1>
                <p class="lead reveal delay-2 hero-lead">Reserve parking slots, pay via M-Pesa, and monitor availability in real time — all from one dashboard.</p>

                <div class="d-flex gap-3 flex-wrap mt-4 reveal delay-3">
                    <a href="{% url 'register' %}" class="btn btn-warning btn-lg btn-pop">Book Your Slot</a>
                    <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg btn-pop">Login</a>
                    <a href="#faq" class="btn btn-link text-white">Learn More</a>
                </div>
            </div>

            <div class="col-md-6 d-flex justify-content-center">
                <div class="card bg-secondary text-white shadow reveal delay-4 floaty" style="max-width: 32rem;">
                    <div class="card-body">
                        <h5 class="card-title">Drive Smarter</h5>
                        <p class="card-text text-muted">Quickly find and reserve nearby slots, pay securely with M-Pesa, and get instant booking confirmation.</p>
                        <ul class="list-unstyled small text-muted">
                            <li>• Fast search & reserve</li>
                            <li>• One-tap M-Pesa payments</li>
                            <li>• Clear booking status & history</li>
                        </ul>
                        <a href="{% url 'parking:driver_slots' %}" class="btn btn-warning mt-3 btn-pop">See Available Slots</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Parking Statistics -->
<section class="py-5 bg-dark text-white border-top border-secondary">
    <div class="container">
        <h2 class="mb-5 text-center text-white">Parking Lot Status</h2>
        <div class="row g-4 text-center">
            <div class="col-md-3">
                <div class="stat-card p-4 rounded">
                    <div class="stat-value text-success" style="font-size: 2.5rem; font-weight: bold;">{{ available_count|default:0 }}</div>
                    <div class="stat-label text-light mt-2">Available Slots</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card p-4 rounded">
                    <div class="stat-value text-danger" style="font-size: 2.5rem; font-weight: bold;">{{ occupied_count|default:0 }}</div>
                    <div class="stat-label text-light mt-2">Occupied Slots</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card p-4 rounded">
                    <div class="stat-value text-info" style="font-size: 2.5rem; font-weight: bold;">{{ total_slots|default:0 }}</div>
                    <div class="stat-label text-light mt-2">Total Slots</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stat-card p-4 rounded">
                    <div class="stat-value text-warning" style="font-size: 2.5rem; font-weight: bold;">{{ availability_percentage|default:0|floatformat:0 }}%</div>
                    <div class="stat-label text-light mt-2">Availability</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features -->
<section class="py-5 bg-dark text-white">
    <div class="container">
        <h2 class="mb-4 text-white">Why drivers choose {{ SITE_NAME }}?</h2>
        <div class="row g-3">
            <div class="col-md-4">
                <div class="card bg-secondary h-100">
                    <div class="card-body">
                        <h5 class="card-title text-white">Find parking fast</h5>
                        <p class="card-text text-light">See nearby available spots and reserve in seconds so you never circle for parking.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card bg-secondary h-100">
                    <div class="card-body">
                        <h5 class="card-title text-white">Secure, simple payments</h5>
                        <p class="card-text text-light">Pay quickly using M-Pesa with secure STK integration and instant confirmation.</p>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card bg-secondary h-100">
                    <div class="card-body">
                        <h5 class="card-title text-white">Easy booking history</h5>
                        <p class="card-text text-light">Access past reservations and receipts from your dashboard anytime.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Services (spread out) -->
<section id="services" class="section-spread bg-dark text-white">
    <div class="container">
        <h2 class="mb-4 reveal delay-1">Our Services</h2>
        <div class="services-grid">
            <div class="card bg-secondary p-4 reveal delay-2">
                <h5 class="card-title">Quick Reservations</h5>
                <p class="card-text text-muted">Search, reserve and get directions to your booked spot in one flow.</p>
            </div>
            <div class="card bg-secondary p-4 reveal delay-3">
                <h5 class="card-title">Fast Payments</h5>
                <p class="card-text text-muted">Pay via M-Pesa instantly — no cash, no queues.</p>
            </div>
            <div class="card bg-secondary p-4 reveal delay-4">
                <h5 class="card-title">Saved Places</h5>
                <p class="card-text text-muted">Save favourite parking spots and rebook them in one tap for faster trips.</p>
            </div>
        </div>
    </div>
</section>

<!-- About Us (spread and readable) -->
<section id="about" class="section-spread bg-dark text-white">
    <div class="container">
        <div class="row align-items-center g-4">
            <div class="col-md-6 reveal delay-1 about-hero">
                <img src="{% static 'img/logo.svg' %}" alt="{{ SITE_NAME }}" class="img-fluid floaty" />
            </div>
            <div class="col-md-6 reveal delay-2">
                <h3 class="text-white">About {{ SITE_NAME }}</h3>
                <p class="text-light">{{ SITE_NAME }} helps drivers find, reserve, and pay for parking quickly and securely. We focus on making your journey simpler — from searching for nearby spots to instant payment confirmation.</p>
                <p class="text-light">Our goal is to save you time and stress: less circling for parking, faster checkouts, and clear booking records.</p>
                <a href="#contact" class="btn btn-warning btn-pop mt-3">Contact Us</a>
            </div>
        </div>
    </div>
</section>

<!-- FAQ -->
<section id="faq" class="py-5 bg-dark text-white">
    <div class="container">
        <h2 class="mb-3 text-white">Frequently Asked Questions</h2>
        <div class="accordion" id="faqAccordion" style="background: transparent;">
            <div class="accordion-item" style="background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1);">
                <h2 class="accordion-header" id="faq1">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFaq1" aria-expanded="false" aria-controls="collapseFaq1" style="color: #fff; background: rgba(255,255,255,0.03);">
                        How do I reserve a parking spot?
                    </button>
                </h2>
                <div id="collapseFaq1" class="accordion-collapse collapse" aria-labelledby="faq1" data-bs-parent="#faqAccordion">
                    <div class="accordion-body text-light" style="background: rgba(255,255,255,0.02);">Search available slots and tap a slot to reserve it. Confirm your booking and pay securely with M-Pesa; you'll get instant confirmation and directions.</div>
                </div>
            </div>
            <div class="accordion-item" style="background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); margin-top: 0.75rem;">
                <h2 class="accordion-header" id="faq2">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFaq2" aria-expanded="false" aria-controls="collapseFaq2" style="color: #fff; background: rgba(255,255,255,0.03);">
                        What about free parking?
                    </button>
                </h2>
                <div id="collapseFaq2" class="accordion-collapse collapse" aria-labelledby="faq2" data-bs-parent="#faqAccordion">
                    <div class="accordion-body text-light" style="background: rgba(255,255,255,0.02);">Some locations offer free parking at specified times. Availability is shown in the app so you can plan ahead.</div>
                </div>
            </div>
            <div class="accordion-item" style="background: rgba(255,255,255,0.05); border-color: rgba(255,255,255,0.1); margin-top: 0.75rem;">
                <h2 class="accordion-header" id="faq3">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFaq3" aria-expanded="false" aria-controls="collapseFaq3" style="color: #fff; background: rgba(255,255,255,0.03);">
                        Can I cancel or change a booking?
                    </button>
                </h2>
                <div id="collapseFaq3" class="accordion-collapse collapse" aria-labelledby="faq3" data-bs-parent="#faqAccordion">
                    <div class="accordion-body text-light" style="background: rgba(255,255,255,0.02);">Yes — you can cancel or modify upcoming bookings from your dashboard. Cancellation rules and refunds depend on the lot's policy (shown at booking).</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact / Subscribe -->
<section id="contact" class="py-5 bg-dark text-white">
    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <h3 class="text-white">How can we address your parking needs?</h3>
                <p class="text-light">We offer tailored setups for residential, commercial and campus parking including contactless registration, enforcement, and reporting.</p>
                <p class="text-light">Email us at <a href="mailto:{{ CONTACT_INFO.email }}" class="text-warning">{{ CONTACT_INFO.email }}</a> or call <span class="text-warning">{{ CONTACT_INFO.phone }}</span>.</p>
            </div>
            <div class="col-md-6">
                <h4 class="text-white">Subscribe</h4>
                <form id="subscribe-form" method="post" action="{% url 'subscribe' %}" class="row g-2">
                    {% csrf_token %}
                    <div class="col-8">
                        <input type="email" name="email" placeholder="Your email" required class="form-control" />
                    </div>
                    <div class="col-4">
                        <button type="submit" class="btn btn-warning w-100">Subscribe</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

<footer class="py-4 bg-dark text-white">
    <div class="container d-flex justify-content-between align-items-center">
        <div>
            <strong>{{ CONTACT_INFO.company_name }}</strong><br>
            <a href="mailto:{{ CONTACT_INFO.email }}" class="text-white">{{ CONTACT_INFO.email }}</a> &middot; {{ CONTACT_INFO.phone }}<br>
            <small class="text-muted">{{ CONTACT_INFO.address }}</small>
        </div>
        <div class="text-end">
            <small class="text-muted">&copy; 2025 {{ SITE_NAME }}</small>
            {% if user.is_staff %}
                <div><a href="/admin/" class="btn btn-sm btn-outline-light mt-2">Edit Contact Info</a></div>
            {% endif %}
        </div>
    </div>
</footer>

{% endblock %}